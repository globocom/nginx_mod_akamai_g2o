--- nginx-1.6.1/prefix/conf/nginx.conf.default	2019-03-30 19:33:10.000000000 -0300
+++ nginx-1.6.1/prefix/conf/nginx.conf	2019-03-30 19:59:02.000000000 -0300
@@ -1,3 +1,4 @@
+daemon off;
 
 #user  nobody;
 worker_processes  1;
@@ -5,6 +6,7 @@
 #error_log  logs/error.log;
 #error_log  logs/error.log  notice;
 #error_log  logs/error.log  info;
+error_log  logs/error.log  debug;
 
 #pid        logs/nginx.pid;
 
@@ -33,7 +35,7 @@
     #gzip  on;
 
     server {
-        listen       80;
+        listen       8080;
         server_name  localhost;
 
         #charset koi8-r;
@@ -43,6 +45,44 @@
         location / {
             root   html;
             index  index.html index.htm;
+
+            location /download {
+                g2o                   on;
+                g2o_nonce             "token";
+                g2o_key               "a_password";
+            }
+
+            location /allow_token1 {
+                g2o        on;
+                g2o_nonce  "token1";
+                g2o_key    "a_different_password";
+            }
+
+            location /allow_all {
+                g2o        off;
+                g2o_nonce  "token";
+                g2o_key    "a_password";
+            }
+
+            location /using_vars {
+                set $token        "token";
+                set $pass         "a_password";
+
+                g2o              on;
+                g2o_nonce        $token;
+                g2o_key          $pass;
+            }
+
+            location /using_vars_for_headers {
+                set $data_header  "X-Custom-G2O-Auth-Data";
+                set $sign_header  "X-Custom-G2O-Auth-Sign";
+
+                g2o              on;
+                g2o_nonce        "token";
+                g2o_key          "a_password";
+                g2o_data_header  $data_header;
+                g2o_sign_header  $sign_header;
+            }
         }
 
         #error_page  404              /404.html;
